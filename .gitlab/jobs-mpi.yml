# ------------------------------------------------------------------------------
# BUILD JOBS

toss_gcc_mvapich2_cxxonly_build:
  extends: [.build_and_test, .toss_resource1, .gcc_mvapich2_cxxonly]



toss_gcc_mvapich2_build:
  extends: [.build_and_test, .toss_resource2, .gcc_mvapich2]

toss_gcc_mvapich2_test:
  extends: [.run_ats, .toss_resource2, .gcc_mvapich2]
  needs: [toss_gcc_mvapich2_build]



toss_clang_mvapich2_build:
  extends: [.build_and_test, .toss_resource1, .clang_mvapich2]

toss_clang_mvapich2_test:
  extends: [.run_ats, .toss_resource2, .clang_mvapich2]
  needs: [toss_clang_mvapich2_build]



#toss_oneapi_2022_1_mvapich2:
#  extends: [.oneapi_2022_1_mvapich2, .build_and_test, .toss_resource]



blueos_gcc_spectrum_build:
  extends: [.build_and_test, .blueos_resource1, .gcc_spectrum]

blueos_gcc_spectrum_test:
  extends: [.run_ats, .blueos_resource1, .gcc_spectrum]
  needs: [blueos_gcc_spectrum_build]



blueos_cuda_11_gcc_spectrum_build:
  extends: [.build_and_test, .blueos_resource2, .cuda_11_gcc_spectrum]

blueos_cuda_11_gcc_spectrum_test:
  extends: [.run_ats, .blueos_resource2, .cuda_11_gcc_spectrum]
  needs: [blueos_cuda_11_gcc_spectrum_build]
  allow_failure: true


# ------------------------------------------------------------------------------
# CLEAN OLD BUILD DIRS

cleanup_build_dirs:
  extends: [.clean_dirs]


# ------------------------------------------------------------------------------
# UPDATE TPL JOBS

blueos_update_tpls:
  extends: [.blueos_resource2, .update_tpls, .merge_pr_rule]

toss_update_tpls:
  extends: [.toss_resource2, .update_tpls, .merge_pr_rule]

# ------------------------------------------------------------------------------
# UPDATE PERM JOBS

toss_update_permissions:
  extends: [.toss_resource_general, .toss_update_permissions, .merge_pr_rule]

get_property(SPHERAL_CXX_LIBS GLOBAL PROPERTY SPHERAL_CXX_LIBS)

add_subdirectory(DeviceTestLib)

#------------------------------------------------------------------------------
# Specify list of tests
#------------------------------------------------------------------------------

set(gtest_spheral_tests
   )


# set(spheral_test_depends
#     spheral_blt_depends
#    )

#------------------------------------------------------------------------------
# Add gtest C++ tests
#------------------------------------------------------------------------------
foreach(test ${gtest_spheral_tests})
    get_filename_component( test_name ${test} NAME_WE )
    blt_add_executable( NAME ${test_name}_test
                        SOURCES ${test}
                        OUTPUT_DIR ${${PROJECT_BINARY_DIR}/tests}
                        DEPENDS_ON ${SPHERAL_CXX_LIBS} ${spheral_blt_depends} gtest
                        )

    blt_add_test( NAME ${test_name}
                  COMMAND ${test_name}_test
                  )
endforeach()


#blt_add_executable( NAME lvarray_test
#                    SOURCES LvArray_Test.cc
#                    DEPENDS_ON ${spheral_blt_depends} cuda)

blt_add_executable( NAME spheral_cuda_test
                    SOURCES Spheral_CUDA_Test.cc
                    #DEPENDS_ON Spheral_DeviceTestLib ${spheral_blt_depends} ${SPHERAL_CXX_DEPENDS})
                    DEPENDS_ON ${SPHERAL_CXX_LIBS} Spheral_DeviceTestLib ${spheral_blt_depends} ${SPHERAL_CXX_DEPENDS})

set_property(TARGET spheral_cuda_test PROPERTY CUDA_SEPARABLE_COMPILATION On)

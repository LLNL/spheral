set (_python_packages
  CXXTypes
  CXXTests
  Geometry
  Silo
  DataOutput
  NodeList
  Field
  FieldList
  Kernel
  Neighbor
  Material
  FileIO
  Utilities
  RK
  DataBase
  Boundary
  Physics
  Hydro
  Integrator
  NodeGenerators
  FieldOperations
  SPH
  CRKSPH
  SVPH
  DEM
  GSPH
  FSISPH
  ArtificialViscosity
  Mesh
  Damage
  SolidMaterial
  Strength
  Porosity
  KernelIntegrator
  polytope
  OpenMP
  )

if(ENABLE_MPI)
  list(APPEND _python_packages Distributed)
endif()

if (ENABLE_ANEOS)
  list(APPEND _python_packages ANEOS)
endif()

if (ENABLE_HELMHOLTZ)
  list(APPEND _python_packages Helmholtz)
endif()

if (SPHERAL_ENABLE_ARTIFICIAL_CONDUCTION)
  list(APPEND _python_packages ArtificialConduction)
endif()

if (SPHERAL_ENABLE_EXTERNAL_FORCE)
  list(APPEND _python_packages ExternalForce)
endif()

if (SPHERAL_ENABLE_GRAVITY)
  list(APPEND _python_packages Gravity)
endif()

foreach(_python_package ${_python_packages})
  add_subdirectory(${_python_package})
endforeach()

string(REPLACE ";" " " PYTHONPKGS "${_python_packages}")
configure_file(
  ${CMAKE_CURRENT_SOURCE_DIR}/SpheralCompiledPackages.py.in
  ${CMAKE_CURRENT_BINARY_DIR}/SpheralCompiledPackages.py)

set(PYB11_python_targets
  SpheralPickle.py
  PolyhedronFileUtilities.py
  ${CMAKE_CURRENT_BINARY_DIR}/SpheralCompiledPackages.py
  )

spheral_install_python_files(${PYB11_python_targets})

install(FILES       Spheral.pth 
        DESTINATION ${SPHERAL_SITE_PACKAGES_PATH})
